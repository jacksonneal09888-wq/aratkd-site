<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ara TKD | Staff Activity Dashboard</title>
    <meta name="description" content="Admin-only dashboard for Ara TKD staff to review student portal activity.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@500;600;700&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/styles.css?v=20241027">
</head>
<body data-portal-mode="admin" data-api-base="https://portal-api.jacksonneal09888.workers.dev" data-admin-trigger-pin="1453" data-admin-username="MasterAra" data-admin-password="AraTKD">
    <header class="site-header">
        <div class="container">
            <div class="brand">
                <a href="index.html#top" class="brand-link">
                    <span class="brand-mark">ARA</span>
                    <span class="brand-name">Martial Arts</span>
                </a>
            </div>
            <nav class="main-nav" aria-label="Staff Navigation">
                <button class="nav-toggle" aria-expanded="false" aria-controls="primary-nav">Menu</button>
                <ul id="primary-nav">
                    <li><a href="index.html#programs">Programs</a></li>
                    <li><a href="student-portal.html">Student Portal</a></li>
                    <li><a href="index.html#contact">Contact</a></li>
                </ul>
            </nav>
            <div class="header-actions">
                <div class="language-switcher">
                    <span class="language-switcher__label">Language</span>
                    <div id="google_translate_element"></div>
                    <span class="language-switcher__powered">Powered by Google Translate</span>
                </div>
                    <a href="index.html#contact" class="cta-btn">Book a Trial</a>
            </div>
        </div>
    </header>

    <main>
        <section class="section portal-admin" aria-labelledby="portal-admin-dashboard">
            <div class="container">
                <div class="section-heading">
                    <p class="eyebrow">Master Ara Access</p>
                    <h2 id="portal-admin-dashboard">Admin Activity Dashboard</h2>
                    <p>Use MasterAra / AraTKD plus PIN to unlock roster, membership, payments, and notes.</p>
                </div>
                <div class="admin-panel">
                    <form class="admin-auth" id="admin-auth-form" autocomplete="off">
                        <div>
                            <label for="admin-username">Username</label>
                            <input type="text" id="admin-username" name="adminUsername" placeholder="MasterAra" required>
                        </div>
                        <div>
                            <label for="admin-password">Password</label>
                            <input type="password" id="admin-password" name="adminPassword" placeholder="AraTKD" required>
                        </div>
                            <div>
                                <label for="admin-pin">Security PIN</label>
                                <input type="password" id="admin-pin" name="adminPin" placeholder="1453">
                            </div>
                        <button type="submit" class="cta-btn">Sign In</button>
                        <p class="form-status" id="admin-status" aria-live="polite">Use MasterAra / AraTKD to unlock.</p>
                    </form>
                    <div class="admin-dashboard" id="admin-dashboard" hidden>
                        <div class="admin-summary">
                            <div class="admin-summary__header">
                                <h3>Usage Overview</h3>
                                <div class="admin-summary__actions">
                                    <button type="button" class="text-link-btn" id="admin-expand">Expand Panel</button>
                                    <button type="button" class="text-link-btn" id="admin-summary-download">Download CSV</button>
                                    <button type="button" class="secondary-btn" id="admin-refresh">Refresh Data</button>
                                    <a class="secondary-btn" href="admin-new-student.html?pin=1453" target="_blank" rel="noopener">Add New Student</a>
                                </div>
                            </div>
                            <p class="admin-generated">Last updated <span id="admin-generated-at">—</span></p>
                            <div class="admin-table-wrap">
                                <table class="admin-table" aria-label="Portal usage summary">
                                    <thead>
                                        <tr>
                                        <th scope="col">Student ID</th>
                                        <th scope="col">Total Events</th>
                                        <th scope="col">Logins</th>
                                        <th scope="col">Latest Belt</th>
                                        <th scope="col">Last Activity</th>
                                        <th scope="col">Status</th>
                                        <th scope="col">Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="admin-summary-body">
                                        <tr>
                                            <td colspan="7">Sign in to load analytics.</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="admin-events">
                            <h3>Recent Portal Events</h3>
                            <ul class="admin-event-list" id="admin-events-list">
                                <li>No events yet.</li>
                            </ul>
                        </div>
                        <div class="admin-attendance" id="admin-attendance" hidden>
                            <div class="admin-summary__header">
                                <h3>Latest Attendance Check-ins</h3>
                                <button type="button" class="text-link-btn" id="admin-attendance-refresh">Refresh</button>
                            </div>
                            <div class="admin-table-wrap">
                                <table class="admin-table" aria-label="Recent attendance">
                                    <thead>
                                        <tr>
                                            <th scope="col">Student ID</th>
                                            <th scope="col">Class</th>
                                            <th scope="col">Kiosk</th>
                                            <th scope="col">Attendance %</th>
                                            <th scope="col">Time</th>
                                        </tr>
                                    </thead>
                                    <tbody id="admin-attendance-body">
                                        <tr>
                                            <td colspan="5">No attendance logs yet.</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="admin-attendance" id="admin-roster" hidden>
                            <div class="admin-summary__header">
                                <h3>Student Roster</h3>
                                <div>
                                    <a class="text-link-btn" href="admin-new-student.html?pin=1453" target="_blank" rel="noopener">Add New Student</a>
                                    <button type="button" class="text-link-btn" id="admin-roster-refresh">Refresh</button>
                                </div>
                            </div>
                            <div class="admin-table-wrap">
                                <table class="admin-table" aria-label="Student roster">
                                    <thead>
                                        <tr>
                                            <th scope="col">ID</th>
                                            <th scope="col">Name</th>
                                            <th scope="col">Membership</th>
                                            <th scope="col">Belt</th>
                                            <th scope="col">Status</th>
                                            <th scope="col">Updated</th>
                                            <th scope="col">Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="admin-roster-body">
                                        <tr>
                                            <td colspan="7">Sign in to load the roster.</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="admin-roster-detail" id="admin-roster-detail" hidden>
                                <div class="admin-roster-detail__head">
                                    <div>
                                        <p class="admin-roster-detail__label">Selected Student</p>
                                        <p class="admin-roster-detail__name" id="admin-roster-student-name">—</p>
                                        <p class="admin-roster-detail__meta" id="admin-roster-student-meta">—</p>
                                    </div>
                                    <div class="admin-roster-detail__membership">
                                        <label for="admin-roster-membership">Membership Type</label>
                                        <select id="admin-roster-membership">
                                            <option value="">Not set</option>
                                            <option value="Month-to-Month">Month-to-Month</option>
                                            <option value="Tier 1">Tier 1</option>
                                            <option value="Tier 2">Tier 2</option>
                                            <option value="Tier 3">Tier 3</option>
                                            <option value="Annual">Annual</option>
                                        </select>
                                        <button type="button" class="secondary-btn" id="admin-roster-save">Save Membership</button>
                                        <button type="button" class="text-link-btn" id="admin-roster-newtab">Open Detail View</button>
                                    </div>
                                </div>
                                <p class="admin-accordion__hint">Use the Details action in the roster to open this editor for contact, belt, attendance, and membership updates.</p>
                                <div class="admin-roster-actions">
                                    <button type="button" class="secondary-btn" data-roster-action="report">Report Card</button>
                                    <button type="button" class="secondary-btn" data-roster-action="note">Add Note</button>
                                    <button type="button" class="secondary-btn" data-roster-action="payment">Add Payment Note</button>
                                    <button type="button" class="secondary-btn" data-roster-action="deactivate">Deactivate</button>
                                    <button type="button" class="secondary-btn" data-roster-action="activate">Reactivate</button>
                                </div>
                                <div class="admin-roster-cards">
                                    <div class="admin-roster-card">
                                        <p class="card-label">Status</p>
                                        <p class="card-value" id="admin-roster-card-status">—</p>
                                    </div>
                                    <div class="admin-roster-card">
                                        <p class="card-label">Last 30 days</p>
                                        <p class="card-value" id="admin-roster-card-30">—</p>
                                    </div>
                                    <div class="admin-roster-card">
                                        <p class="card-label">Last 60 days</p>
                                        <p class="card-value" id="admin-roster-card-60">—</p>
                                    </div>
                                    <div class="admin-roster-card">
                                        <p class="card-label">Membership</p>
                                        <p class="card-value" id="admin-roster-card-membership">—</p>
                                    </div>
                                </div>
                                <div class="admin-roster-edit">
                                    <h4>Roster Editor</h4>
                                    <p class="admin-accordion__hint">Update contact, belt, and status directly from this detail view.</p>
                                    <form class="admin-roster-edit__form" id="admin-roster-edit-form" autocomplete="off">
                                        <div class="admin-roster-edit__grid">
                                            <label>
                                                <span>Student Name</span>
                                                <input type="text" id="admin-roster-name" placeholder="Full name">
                                            </label>
                                            <label>
                                                <span>Email</span>
                                                <input type="email" id="admin-roster-email" placeholder="name@example.com">
                                            </label>
                                            <label>
                                                <span>Phone</span>
                                                <input type="tel" id="admin-roster-phone" placeholder="9195551234">
                                            </label>
                                            <label>
                                                <span>Current Belt</span>
                                                <select id="admin-roster-belt">
                                                    <option value="">Keep current</option>
                                                    <option value="White Belt">White Belt</option>
                                                    <option value="High White Belt">High White Belt</option>
                                                    <option value="Yellow Belt">Yellow Belt</option>
                                                    <option value="High Yellow Belt">High Yellow Belt</option>
                                                    <option value="Green Belt">Green Belt</option>
                                                    <option value="High Green Belt">High Green Belt</option>
                                                    <option value="Blue Belt">Blue Belt</option>
                                                    <option value="High Blue Belt">High Blue Belt</option>
                                                    <option value="Red Belt">Red Belt</option>
                                                    <option value="High Red Belt">High Red Belt</option>
                                                    <option value="Black Belt">Black Belt</option>
                                                </select>
                                            </label>
                                            <label>
                                                <span>Status</span>
                                                <select id="admin-roster-status">
                                                    <option value="active">Active</option>
                                                    <option value="inactive">Inactive</option>
                                                    <option value="frozen">Frozen</option>
                                                    <option value="suspended">Suspended</option>
                                                    <option value="prospect">Prospect</option>
                                                </select>
                                            </label>
                                        </div>
                                        <div class="admin-roster-edit__actions">
                                            <button type="submit" class="secondary-btn">Save Roster Updates</button>
                                            <p class="form-status" id="admin-roster-edit-status" aria-live="polite"></p>
                                        </div>
                                    </form>
                                </div>
                                <div class="admin-attendance-adjust">
                                    <h4>Attendance Adjustment</h4>
                                    <p class="admin-accordion__hint">Add or remove sessions when a kiosk check-in is missed.</p>
                                    <form class="admin-attendance-adjust__form" id="admin-attendance-adjust-form" autocomplete="off">
                                        <div class="admin-attendance-adjust__grid">
                                            <label>
                                                <span>Sessions</span>
                                                <input type="number" id="admin-attendance-adjust-value" min="1" max="20" value="1" inputmode="numeric">
                                            </label>
                                            <label>
                                                <span>Class</span>
                                                <select id="admin-attendance-adjust-class">
                                                    <option value="basic">Basic Class</option>
                                                    <option value="advanced">Advanced Class</option>
                                                    <option value="little-ninjas">Little Ninjas</option>
                                                </select>
                                            </label>
                                            <label>
                                                <span>Level Label</span>
                                                <select id="admin-attendance-adjust-level">
                                                    <option value="">Auto-detect</option>
                                                    <option value="Basic Class">Basic Class</option>
                                                    <option value="Advanced Class">Advanced Class</option>
                                                    <option value="Little Ninjas">Little Ninjas</option>
                                                    <option value="All Levels">All Levels</option>
                                                </select>
                                            </label>
                                            <label>
                                                <span>Note</span>
                                                <input type="text" id="admin-attendance-adjust-note" placeholder="e.g. manual make-up session">
                                            </label>
                                        </div>
                                        <div class="admin-attendance-adjust__actions">
                                            <button type="submit" class="secondary-btn" data-adjust="add">Add Sessions</button>
                                            <button type="submit" class="text-link-btn" data-adjust="remove">Remove Sessions</button>
                                            <p class="form-status" id="admin-attendance-adjust-status" aria-live="polite"></p>
                                        </div>
                                    </form>
                                </div>
                                <details class="admin-accordion" open>
                                    <summary>Financial Management</summary>
                                    <p class="admin-accordion__hint">Use notes to log payments or billing conversations. SwipeSimple transactions can be noted here.</p>
                                </details>
                                <details class="admin-accordion">
                                    <summary>Progress Tracking</summary>
                                    <p class="admin-accordion__hint">Track readiness, test requests, and belt uploads via the report card.</p>
                                </details>
                                <details class="admin-accordion">
                                    <summary>Workout Tracking</summary>
                                    <p class="admin-accordion__hint">Use notes to capture class feedback or practice assignments.</p>
                                </details>
                                <details class="admin-accordion" open>
                                    <summary>Membership Management</summary>
                                    <p class="admin-accordion__hint">Set membership type and keep billing notes synced.</p>
                                </details>
                                <details class="admin-accordion">
                                    <summary>Payment Profile Management</summary>
                                    <p class="admin-accordion__hint">Record SwipeSimple payment confirmations and follow-ups.</p>
                                </details>
                                <div class="admin-roster-notes">
                                    <div class="admin-roster-notes__form">
                                        <h4>Notes / Payments</h4>
                                        <form id="admin-roster-note-form">
                                            <label>
                                                <span>Type</span>
                                                <select id="admin-roster-note-type">
                                                    <option value="note">Note</option>
                                                    <option value="payment">Payment</option>
                                                    <option value="message">Message</option>
                                                </select>
                                            </label>
                                            <label>
                                                <span>Message</span>
                                                <textarea id="admin-roster-note-message" rows="3" placeholder="Add note or payment detail"></textarea>
                                            </label>
                                            <label>
                                                <span>Author</span>
                                                <input type="text" id="admin-roster-note-author" placeholder="e.g. Miss Fatima">
                                            </label>
                                            <button type="submit" class="cta-btn">Add Entry</button>
                                        </form>
                                    </div>
                                    <div class="admin-roster-notes__list">
                                        <h4>Activity</h4>
                                        <ul id="admin-roster-notes-list">
                                            <li>No notes yet.</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="admin-enroll" id="admin-enroll" hidden>
                            <div class="admin-summary__header">
                                <h3>Quick Student Enrollment</h3>
                                <p>Generate a new Ara ID, login credential, and optional attendance seed in one step.</p>
                            </div>
                            <form class="admin-enroll__form" id="admin-enroll-form" autocomplete="off">
                                <div class="admin-enroll__grid">
                                    <label>
                                        <span>Student Name</span>
                                        <input type="text" id="admin-enroll-name" name="name" placeholder="First and Last" required>
                                    </label>
                                    <label>
                                        <span>Date of Birth</span>
                                        <input type="date" id="admin-enroll-dob" name="birthDate" required>
                                    </label>
                                    <label>
                                        <span>Parent Email</span>
                                        <input type="email" id="admin-enroll-email" name="email" placeholder="name@example.com">
                                    </label>
                                    <label>
                                        <span>Phone</span>
                                        <input type="tel" id="admin-enroll-phone" name="phone" placeholder="9195551234">
                                    </label>
                                    <label>
                                        <span>Starting Belt</span>
                                        <select id="admin-enroll-belt" name="belt">
                                            <option value="White Belt">White Belt</option>
                                            <option value="High White Belt">High White Belt</option>
                                            <option value="Yellow Belt">Yellow Belt</option>
                                            <option value="High Yellow Belt">High Yellow Belt</option>
                                            <option value="Green Belt">Green Belt</option>
                                            <option value="High Green Belt">High Green Belt</option>
                                            <option value="Blue Belt">Blue Belt</option>
                                            <option value="High Blue Belt">High Blue Belt</option>
                                            <option value="Red Belt">Red Belt</option>
                                            <option value="High Red Belt">High Red Belt</option>
                                            <option value="Black Belt">Black Belt</option>
                                        </select>
                                    </label>
                                    <label>
                                        <span>Class Track</span>
                                        <select id="admin-enroll-class-type" name="classType">
                                            <option value="basic">Basic Class</option>
                                            <option value="advanced">Advanced Class</option>
                                            <option value="little-ninjas">Little Ninjas</option>
                                        </select>
                                    </label>
                                    <label>
                                        <span>Seed Attendance Days</span>
                                        <input type="number" id="admin-enroll-attendance" name="initialAttendanceDays" min="0" max="10" value="3">
                                    </label>
                                </div>
                                <div class="admin-enroll__actions">
                                    <button type="submit" class="cta-btn">Create Student</button>
                                    <p class="form-status" id="admin-enroll-status" aria-live="polite"></p>
                                </div>
                            </form>
                            <div class="admin-enroll__result" id="admin-enroll-result" hidden>
                                <p class="admin-enroll__result-title">New student ready for login.</p>
                                <div class="admin-enroll__result-details" id="admin-enroll-details"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="site-footer">
        <div class="container footer-grid">
            <div>
                <p class="brand-mark">ARA</p>
                <p>Committed to HONOR, COURTESY, RESPECT, INTEGRITY, and PERSEVERANCE for every student we serve.</p>
            </div>
            <div>
                <h3>Connect</h3>
                <ul>
                    <li><a href="https://www.instagram.com" target="_blank" rel="noopener">Instagram</a></li>
                    <li><a href="https://www.facebook.com" target="_blank" rel="noopener">Facebook</a></li>
                    <li><a href="https://www.youtube.com" target="_blank" rel="noopener">YouTube</a></li>
                </ul>
            </div>
            <div>
                <h3>Hours</h3>
                <ul>
                    <li>Mon-Fri: 11:30 AM - 8:30 PM</li>
                    <li>Sat: By appointment</li>
                    <li>Sun: Closed</li>
                </ul>
            </div>
        </div>
        <p class="footer-note">&copy; <span id="year"></span> Ara's Martial Arts Sportsplex. All rights reserved.</p>
    </footer>

    <script type="module" src="assets/js/student-portal.js?v=20241126" defer></script>
    <script src="assets/js/main.js?v=20241027" defer></script>
    <script src="assets/js/translate.js"></script>
    <script src="https://translate.google.com/translate_a/element.js?cb=initAraTranslate"></script>
</body>
</html>
